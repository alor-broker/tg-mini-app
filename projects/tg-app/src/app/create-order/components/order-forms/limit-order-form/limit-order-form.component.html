@if (orderMeta$ | async; as orderMeta) {
  <form
    *transloco="let t; scope: 'create-order/order-forms'"
    [formGroup]="form"
    nzLayout="vertical"
    nz-form
  >
    <nz-form-item>
      <nz-form-label nzFor="quantity" nzRequired>
        {{ t('createOrderOrderForms.quantityLabel') }}
      </nz-form-label>
      <nz-form-control [nzErrorTip]="quantityError">

        <tga-input-number formControlName="quantity" placeholder="0"></tga-input-number>

        <span class="fs-sm text-subtitle-color">
          {{ t('createOrderOrderForms.lotSize') }} {{ orderMeta.instrument.lotsize }} {{ t('createOrderOrderForms.pcs') }}.
        </span>

        <ng-template #quantityError>
          @if (form.controls.quantity.errors?.required) {
            <span>{{ t('form.errors.required') }}</span>
          }
          @if (form.controls.quantity.errors?.min) {
            <span>{{ t('form.errors.min') }}</span>
          }
          @if (form.controls.quantity.errors?.max) {
            <span>{{ t('form.errors.max') }}</span>
          }
        </ng-template>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzFor="price" nzRequired>
        {{ t('createOrderOrderForms.priceLabel') }}
      </nz-form-label>
      <nz-form-control [nzErrorTip]="priceError">

        <tga-input-number formControlName="price" placeholder="0"></tga-input-number>

        <ng-template #priceError>
          @if (form.controls.price.errors?.required) {
            <span>{{ t('form.errors.required') }}</span>
          }
          @if (form.controls.price.errors?.min) {
            <span>{{ t('form.errors.min') }}</span>
          }
          @if (form.controls.price.errors?.max) {
            <span>{{ t('form.errors.max') }}</span>
          }
          @if (form.controls.price.errors?.priceStepMultiplicity; as err) {
            <span>{{ t('form.errors.priceStepMultiplicity', { step: err.step }) }}</span>
          }
        </ng-template>
      </nz-form-control>
    </nz-form-item>
  </form>

  <tga-order-evaluation
    [evaluationProperties]="evaluationRequest$ | async"
    [currency]="orderMeta.instrument.currency"
  ></tga-order-evaluation>

  <tga-submit-order-buttons
    [disabled]="form.invalid"
    (onSubmit)="submitOrder($event)"
  ></tga-submit-order-buttons>
}
